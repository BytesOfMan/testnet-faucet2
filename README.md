# BCHA Testnet Faucet

A testnet faucet for the Bitcoin ABC network.

This is based on the work from [Chris Troutner](https://github.com/christroutner/testnet-faucet2).

## Features

Provide several DoS mitigation features:
* IP request rate limiting
* Give-out rate limiting
* Address reuse prevention

## Requirements
* node __^10.15.1__
* npm __^6.7.0__

## Installation
```bash
git clone https://github.com/Fabcien/testnet-faucet2.git faucet
cd faucet

npm install

docker-compose up -d koa-mongodb

BCHJSTOKEN=<your fullstack.cash API token> \
FAUCET_ENV=production \
npm start
```

Then navigate to `front-end/index.html`.

## Structure
```
├── bin
│   └── server.js            # Bootstrapping and entry point
├── config                    # Server configuration settings
│   ├── env                  # Environment specific config
│   │   ├── common.js
│   │   ├── development.js
│   │   ├── production.js
│   │   └── test.js
│   ├── index.js             # Config entrypoint - exports config according to envionrment and commons
│   └── passport.js          # Passportjs config of strategies
|
├── production               # Dockerfile for build production container
|
├── src                      # Source code
│   ├── lib                  # Business logic libraries
│   ├── modules
│   │   ├── controller.js    # Module-specific controllers
│   │   └── router.js        # Router definitions for module
│   ├── models               # Mongoose models
│   └── middleware           # Custom middleware
│       └── validators       # Validation middleware
└── test                     # Unit tests
```

## Usage
* `npm start` Start server on live mode
* `npm run dev` Start server on dev mode with nodemon
* `npm run docs` Generate API documentation
* `npm test` Run mocha tests
* `docker-compose build` Build a 'production' Docker container
* `docker-compose up` Run the docker container

## Documentation
API documentation is written inline and generated by [apidoc](http://apidocjs.com/).

Call `npm run docs` to generate, then visit `docs/index.html` to view the docs.


## Dependencies
* [koa2](https://github.com/koajs/koa/tree/v2.x)
* [koa-router](https://github.com/alexmingoia/koa-router)
* [koa-bodyparser](https://github.com/koajs/bodyparser)
* [koa-generic-session](https://github.com/koajs/generic-session)
* [koa-logger](https://github.com/koajs/logger)
* [MongoDB](http://mongodb.org/)
* [Mongoose](http://mongoosejs.com/)
* [Passport](http://passportjs.org/)
* [Nodemon](http://nodemon.io/)
* [Mocha](https://mochajs.org/)
* [apidoc](http://apidocjs.com/)
* [ESLint](http://eslint.org/)

## IPFS
v2.3.0 uploaded to IPFS:

- Get it: `ipfs get QmUz4b2KwNLNvHZRTYcgrPCuKAhMB73XWN8vY8LLVVEYV1`
- Pin it: `ipfs pin add -r QmUz4b2KwNLNvHZRTYcgrPCuKAhMB73XWN8vY8LLVVEYV1`

## License
MIT
